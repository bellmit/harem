<link href="$utilWebconfig.getStaticResourcesPath()/resources/zui/lib/datetimepicker/datetimepicker.min.css"
      rel="stylesheet">
<style>
    .table > thead th,
    .table > tbody td {
        text-align: center;
        vertical-align: middle;
    }

    .upload-file {
        float: left;
        width: 200px;
        margin-right: 20px;
    }
</style>

<script src="$utilWebconfig.getStaticResourcesPath()/resources/zui/lib/datetimepicker/datetimepicker.min.js"
        type="text/javascript"></script>
<form id="tbAttachmentSellectListForm" name="tbAttachmentSellectListForm"
      action="$!utilWebconfig.getActionDefaultFontPath()/jiuxiu/attachmentManage/list/select">
    <div class="inputGroup">
        <div class="input-group inpSingle">
                <span class="input-group-btn">
                    <button class="btn btn-default" type="button">文件名称：</button>
                </span>
            <input type="text" class="form-control" name="inputFileTitle" value="$!{mediaPageQuery.inputFileTitle}"
                   id="inputFileName">
        </div>
        <div class="input-group inpSingle">
                <span class="input-group-btn">
                        <button class="btn btn-default" type="button">备注：</button>
                    </span>
            <input type="text" class="form-control" name="remark" id="remark" value="$!{mediaPageQuery.remark}">
        </div>
        <div class="input-group inpSingle">
                <span class="input-group-btn">
                    <button class="btn btn-default" type="button">用途：</button>
                </span>
            <select class="form-control" name="scope" id="scope">
                <option value="0">全部</option>
                #foreach($mediaFileScope in $mediaFileScopeList)
                    <option value="$!{mediaFileScope.value}" #if($mediaPageQuery.scope == $mediaFileScope.value)
                            selected #end>$!{mediaFileScope.desc}</option>
                #end
            </select>
        </div>

        <div class="input-group inpSingle">
              <span class="input-group-btn">
                    <button class="btn btn-default" type="button">上传时间</button>
                </span>
            <input type="text" class='form-control dateInp' placeholder='' readonly name="starteTime" value="">
            <span class="input-group-addon fix-border fix-padding dateInpCenter">至</span>
            <input type="text" class='form-control dateInp' placeholder='' readonly name="endTime" value="">
        </div>

        <div class="btn-group">
            <button type="submit" class="btn btn-primary submitBtn">搜索</button>
        </div>
        <div class="btn-group">
            <button type="reset" class="btn btn-primary btn-clean">重置</button>
        </div>
    </div>

</form>

<div class="tableGroup whole">
    <table class="table table-bordered table-hover" id="tbAttachmentSellectList">
        <thead>
        <tr>
            <th>选择</th>
            <th>序号</th>
            <th>名称</th>
            <th>格式</th>
            <th>上传时间</th>
            <th>时长</th>
            <th>用途</th>
            <th>备注</th>
        </tr>
        </thead>
        <tbody>
            #foreach($item in $itemList)
            <tr>
                <td>
                    <input type="checkbox" fileKey="${item.fileKey}" duration="${item.duration}" durationStr="${item.durationStr}" id="${item.id}" inputFileTitle="${item.inputFileTitle}"/>
                </td>
                <td>$!{item.id}</td>
                <td>
                    $!{item.inputFileTitle}
                </td>
                <td>
                    $!{item.fileTypeStr}
                </td>
                <td>
                    $!utilDate.dateToString($!item.gmtCreated,"yyyy-MM-dd HH:mm:ss")
                </td>
                <td>$!{item.durationStr}</td>
                <td>
                    $!{item.scopeStr}
                </td>
                <td>$!{item.remark}</td>

            </tr>
            #end
        </tbody>
    </table>
</div>
#*分页*#
#parse("/page.vm")
#pageStyle("tbAttachmentSellectListForm")
<script src="$utilWebconfig.getStaticResourcesPath()/resources/js/layerModal.js?version=21"></script>
<script src="$utilWebconfig.getStaticResourcesPath()/resources/js/upload.js?version=21"></script>
<script type="text/javascript">
    layer.config({
        extend: 'extend/layer.ext.js',
        extend: ['skin/mySkin/style.css'],
        skin: 'layer-ext-mySkin'
    });

    $(function () {
        $("#tbAttachmentSellectList").on("click", "input[type='checkbox']", function () {
            var checkbox = $(this);
            var checked = checkbox[0].checked;
            var tr = checkbox.closest("tr");

            if (checked) {
                var selecetdtr = $("#tbAttachmentSellectList tr.selected");
                selecetdtr.removeClass("selected");
                selecetdtr.find("input[type='checkbox']").attr("checked", false);

                tr.addClass("selected");
            } else {
                tr.removeClass("selected");
            }
        });
        $(".dateInp").datetimepicker({
            language: "zh-CN",
            weekStart: 1,
            todayBtn: 1,
            autoclose: 1,
            todayHighlight: 1,
            startView: 2,
            minView: 2,
            forceParse: 0,
            format: "yyyy-mm-dd"
        });
    });
    function getItem() {
        var selecetdtr = $("#tbAttachmentSellectList tr.selected").find("input[type='checkbox']");
        if(selecetdtr.length==0){
            return null;
        }
        return {
            fileKey: selecetdtr.attr("fileKey"),//
            duration: selecetdtr.attr("duration"),//时长 long
            durationStr: selecetdtr.attr("durationStr"),//时长 字符串
            id:selecetdtr.attr("id"),//id
            inputFileTitle:selecetdtr.attr("inputFileTitle")//
        }
    }
</script>

