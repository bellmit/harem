<link href="$!{rc.contextPath}/resources/zui/lib/datetimepicker/datetimepicker.min.css" rel="stylesheet">
<script src="$!{rc.contextPath}/resources/zui/lib/datetimepicker/datetimepicker.min.js" type="text/javascript"></script>
<link rel="stylesheet" href="/resources/css/common.css"/>
<h1>退款</h1>
<div>
    <form class="form-signin" id="refundListForm" name="refundListForm" action="/refundManage/list" method="GET" role="form">
        <div class="inputGroup whole">
            <div class="input-group inpSingle">
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button">交易号</button>
                    </span>
                <input type="text" class="form-control" name="refundNO" value="$!refundListQuery.refundNO">
            </div>
            <div class="input-group inpSingle">
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button">手机号</button>
                    </span>
                <input type="text" class="form-control" name="phone" value="$!refundListQuery.phone">
            </div>
            <div class="input-group inpSingle">
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button">会员名</button>
                    </span>
                <input type="text" class="form-control" name="userName" value="$!refundListQuery.userName">
            </div>
            <div class="input-group inpSingle">
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button">终端编号</button>
                    </span>
                <input type="text" class="form-control" name="terminalName" value="$!refundListQuery.terminalName">
            </div>
            <div class="input-group inpSingle">
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button">交易时间</button>
                    </span>
                <input type="text" class='form-control form-date' placeholder='开始日期：yyyy-MM-dd' readonly name="beginDate" value="$!refundListQuery.beginDate">
                <span class="input-group-addon fix-border fix-padding">至</span>
                <input type="text" class='form-control form-date' placeholder='结束日期：yyyy-MM-dd' readonly name="endDate" value="$!refundListQuery.endDate">
            </div>

            <div class="btn-group">
                <button type="submit" class="btn btn-primary">查询</button>
            </div>
            <div class="btn-group">
                <button type="button" class="btn">导出</button>
            </div>
        </div>

        <div class="tableGroup whole">
            <table class="table table-hover">
                <thead>
                <tr>
                    <th>#</th>
                    <th>交易编号</th>
                    <th>会员姓名</th>
                    <th>手机号</th>
                    <th>退款金额</th>
                    <th>需返还积分</th>
                    <th>可返还积分</th>
                    <th>超出积分扣现</th>
                    <th>实际退款金额</th>
                    <th>退款时间</th>
                    <th>退款状态</th>
                    <th>终端</th>
                    <th>操作员</th>
                    <th>备注</th>
                    <th>查看</th>
                </tr>
                </thead>
                <tbody>
                    #foreach($refund in $refundList)
                    <tr>
                        <td>$!velocityCount</td>
                        <td>$!refund.refundNO</td>
                        <td>$!refund.userName</td>
                        <td>$!refund.phone</td>
                        <td>$!refund.refundMoney</td>
                        <td>$!refund.shouldRefundPoint</td>
                        <td>$!refund.availablePoint</td>
                        <td>$!refund.deductMoneyOffsetPoint</td>
                        <td>$!refund.factRefundMoney</td>
                        <td>$utilDate.dateToString($!refund.refundTime,"yyyy-MM-dd HH:mm:ss")</td>
                        <td>$!refund.refundStatus</td>
                        <td>$!refund.terminalName</td>
                        <td>$!refund.operatorName</td>
                        <td>$!refund.remark</td>
                        <td><a href="javascript:geRefund('$!refund.id');">退款详情</a></td>
                    </tr>
                    #end
                </tbody>
            </table>
        </div>

    #*分页*#
    #parse("/page.vm")
    #pageStyle("refundListForm")
    </form>
</div>
<script>
    $(".form-date").datetimepicker(
            {
                language:  "zh-CN",
                weekStart: 1,
                todayBtn:  1,
                autoclose: 1,
                todayHighlight: 1,
                startView: 2,
                minView: 2,
                forceParse: 0,
                format: "yyyy-mm-dd"
            });
    function geRefund(id)
    {
        window.open("/refundManage/"+id, "_blank");
    }

</script>
