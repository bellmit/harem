<link rel="stylesheet" href="$utilWebconfig.getStaticResourcesPath()/resources/css/common.css"/>
<link rel="stylesheet" href="$utilWebconfig.getStaticResourcesPath()/resources/css/clubTable.css"/>
<script src="$!{utilWebconfig.getStaticResourcesPath()}/resources/js/layerModal.js" type="text/javascript"></script>


<div class="tab-content grogInfoWrap"  style="">
<form id="saveScenic">
    <div class="tab-pane active" id="grogshopInfo">
        <div class="createHotrlTable">
		
            <table class="table">
                <tr>
                    <td>分类</td>
                    <td>活动</td>
                </tr>
                <tr>
                    <td><span class="spColor">*</span>活动商品名称</td>
                    <td>
                       <input type="text" class="inpCtlBlock" name="itemDO.title" id="" placeholder="不得超过30个字">
                    </td>
                </tr>
                <tr>
                    <td><span class="spColor">*</span>排序</td>
                    <td>
						<input type="text" class="inpCtlBlock" name="" id="" placeholder="请输入整数">
					</td>
                </tr>
            </table>
        <strong>提示</strong>多规格
		        #foreach($category in $categoryDOList)
		        	
		    		<input type="checkbox" attrName="$!category.name" name="$!category.name" value="$!category.id" id="$!category.id" >$!category.name
				 #end
			<table class="extra-info-list table">
				<thead>
					<tr>
							<th>规格值</th>
							<th>库存</th>
							<th>单价</th>
							<th>会员优惠额度</th>
							<th>优惠限购</th>
							<th>操作</th>
					<tr>	
				</thead>
				<tbody class="extra-info-list itemSkuTbody">
			
				</tbody>
			</table>
        </div>
    </div>
   <button type="submit" class="btn btn-info">保存</button>
	</form>
</div>

<script type="text/html" id="itemSkuTemp">
    <tr class="itemSkuTr" id="$index">
        <td>$name<input type="text" name="itemSkuDOList.itemSkuPVPairList[$index6].vId"
             class="form-control">
             <input type="text" name="itemSkuDOList.itemSkuPVPairList[$index7].vTxt"
             class="form-control">
             <input type="text" name="itemSkuDOList.itemSkuPVPairList[$index8].pId"
             class="form-control">
             <input type="text" name="itemSkuDOList.itemSkuPVPairList[$index9].pTxt"
             class="form-control">
             </td>
        <td><input type="text" name="needKnow.frontNeedKnow[$index1].title"
             class="form-control" placeholder="请输入整数"></td>
        <td>
         <td><input type="text" name="needKnow.frontNeedKnow[$index2].title"
             class="form-control" placeholder="请输入整数"></td>
        <td>
         <td><input type="text" name="needKnow.frontNeedKnow[$index3].title"
             class="form-control" placeholder="请输入整数"></td>
        <td>
         <td><input type="text" name="needKnow.frontNeedKnow[$index4].title"
             class="form-control" placeholder="请输入整数"></td>
        <td>
        <td><input type="text" name="needKnow.frontNeedKnow[$index5].title"
             class="form-control" placeholder="请输入整数"></td>
        <td>
            <button type="button" class="btn btn-link" onclick="delneedKnowTR(this)">删除</button>
        </td>
    </tr>
</script>



<script>

 var conTr = $(".itemSkuTr").length + 1;


   /**checkbox事件**/
     $("input[type=checkbox]").unbind("click").click(function () {
                if (this.checked) {//如果自己被选中
                   var addhtml = "";
                   var html1 = $("#itemSkuTemp").html();
                   var i = conTr++;
                   addhtml = addhtml + html1.replace('$name', $(this).attr("attrName")).
                   replace('$index', $(this).attr("id")).replace('$index1', i).replace('$index2', i).replace('$index3', i).replace('$index4', i).replace('$index5', i);
                   $(".itemSkuTbody").prev().append(addhtml);
                }
                else {//如果自己没有被选中
					$("tr[id="+$(this).attr('id')+"]").remove();
                }
            })


   $(function(){
   
   
		/*提交**/
		$("#saveScenic").validate(
			{
				rules:{
					'name' : {
						required : true
					}
					
				},
				errorPlacement : function(error, element) { // 指定错误信息位置

					if (element.is(':radio') || element.is(':checkbox')
							|| element.is(':input')) { // 如果是radio或checkbox
						var eid = element.attr('name'); // 获取元素的name属性
						error.appendTo(element.parent()); // 将错误信息添加当前元素的父结点后面
					} else {
						error.insertAfter(element);
					}
				},
				submitHandler : function(form) {

					var options = {
						url : "edit",
						type : "post",
						dataType : "json",
						success : function(data) {
							
							if (data.success) {
								$.success('操作成功',function(){
									layer.alert("123")
								});
							} else {
								layer.alert(data.msg, {
									icon : 5
								});

							}
						},
						error : function(XMLHttpRequest, textStatus,
								errorThrown) {
							layer.alert('服务忙，请稍后再试', {
								icon : 5
							});
						}
					};
					
					$(form).ajaxSubmit(options);
				},
				invalidHandler : function(form, validator) { // 不通过回调
					return false;
				}
			});
		
		
});




</script>