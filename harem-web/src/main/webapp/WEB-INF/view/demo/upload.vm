<html>
    <head>
        <title>登陆</title>
        <script src="/resources/js/ajaxfileupload.js" type="text/javascript"></script>
        <script>var Y={URL:'${}'}</script>
        <script type="text/javascript">
            function addTr(){
                $("#fileTable").append("<tr><td><input type='file' name='files'/></td><td><input type='button' value='删除' onclick='javascript:deleteTr(this);'/></td></tr>");
            }
            function deleteTr(_tr){
                $(_tr).parent().parent().remove();
            }
            $(function () {
                $("#upload").bind(function () {
                    //ajaxFileUpload();
                })
            })
            function ajaxFileUpload() {

                return false;
            }
            $(document).ready(function(){
                //直接绑定到上传标签上不生效
                $(document).delegate("#fileID",'change',function(){
                    alert($("#fileID").val());
                    $.ajaxFileUpload
                    (
                            {
                                url: '/upload/file', //用于文件上传的服务器端请求地址
                                secureuri: false, //是否需要安全协议，一般设置为false
                                fileElementId: 'fileID', //文件上传域的ID
                                dataType: 'json', //返回值类型 一般设置为json
                                success: function (data,status)  //服务器成功响应处理函数
                                {
                                    if(data && data.status==200){
                                        /*var srcUrl = $('#fileID').attr('linkUrl')
                                        var tfsPaht = $utilWebconfig.getStaticResourcesPath();
                                        $('#'+srcUrl).attr('src',tfsPaht + data.data);*/
                                        alert('上传成功');
                                    }else{
                                        alert('上传失败');
                                    }
                                },
                                error: function (data)//服务器响应失败处理函数
                                {
                                    alert('服务器异常');
                                }
                            }
                    )
                });
            });
        </script>



    </head>
    <body>
        <form name="myform" id="myform" action="/upload/file" method="post" enctype="multipart/form-data">
            <div>
                $request.getContextPath();
                $rc.contextPaht;
                <label>上传图片</label>
                1111
                $request.getParameter('test')
                <label>$utilNumber.moneyTransform(5000)</label>
                utilNumber.getxxx($request)
                <label>$utilDate.dateToString(${hello},'yyyy-MM-dd HH:mm:ss')</label>
                    <table id="fileTable">
                        <tr>
                            <td><input type="file" id="fileID" name="file" class="fileUpload" linkUrl="srcUrl"></td><img src="" id="srcUrl">
                            <td><input type="button" value="添加" onclick="javascript:addTr();"></td>
                        </tr>
                    </table>
            </div>
            <button class="btn btn-lg btn-primary btn-block" id="upload" type="submit">提交</button>
        </form>
    </body>
</html>